<h1> My Uncompleted Tasks </h1>

<hr>

<%= link_to "View Completed Tasks", view_completed_path(@user), method: :get %>

<!-- OPTION ONE -->

<table>
	<tr>
		<th>Task</th>
		<th>Due Date</th>
		<th>Tag</th>
		<th>Priority Level</th>
		<th colspan="2"></th>
	</tr>

	<% @user.tasks.each do |task| %>
		<% if task.is_completed == false %>
		<tr>
			<td><%= task.content %></td>
			<td><%= task.due_date %></td>
			<td><%= task.tag %></td>
			<td><%= task.priority_level %></td>
			<td><%= link_to 'Edit', edit_user_task_path(task.user, task)%></td>
			<td><%= link_to 'Delete', [task.user, task],
               method: :delete,
               data: { confirm: 'Are you sure you want to delete this task?' } %></td>
		</tr>
		<% end %>
	<% end %>
</table>


<!-- OPTION TWO -->

<hr>
<% @user.tasks.each do |task| %>
  <% if task.is_completed == false %>
  <p>
    <strong>Content:</strong>
    <%= task.content %>
  </p>
 
  <p>
    <strong>Due Date:</strong>
    <%= task.due_date %>
  </p>

  <p>
    <strong>Tag:</strong>
    <%= task.tag %>
  </p>

  <p>
    <strong>Priority Level:</strong>
    <%= task.priority_level %>
  </p>

  <p>
    <strong>Completed?</strong>
    <%= task.is_completed %>
  </p>

  <%= link_to 'Edit', edit_user_task_path(task.user, task)%>

  <%= link_to 'Delete', [task.user, task],
               method: :delete,
               data: { confirm: 'Are you sure you want to delete this task?' } %>
  <%= link_to "Done", complete_task_path(task.user, task), method: :put %>
  <hr>
  <% end %>
<% end %>

<hr>

<h1> Add a New Task! </h1>

<%= form_with(model: [ @user, @user.tasks.build ], local: true) do |form| %>

  <p>
    <%= form.label :content %><br>
    <%= form.text_field :content %>
  </p>
 
  <p>
    <%= form.label :due_date %><br>
    <%= form.date_field :due_date %>
  </p>

  <p>
    <%= form.label :tag %><br>
    <%= form.select(:tag, ['Nil', 'Work', 'Study', 'Family', 'Shopping', 'Entertainment', 'Miscellaneous']) %>
  </p>

  <p>
    <%= form.label :priority_level %><br>
    <%= form.select(:priority_level, ['Urgent', 'Normal', 'Trivial']) %>
  </p>

  <p>
    <%= form.submit %>
  </p>
 
<% end %>